# Задание 1

Вы написали view-функцию, обрабатывающую URL `/new_post/`, которая на **GET** запрос отвечает страницей с формой, а на **POST** - создает новый пост из данных формы и редиректит на главную страницу.  
Опишите юнит-тесты, которые вы бы написали для этой view-функции.  

В этом задании код писать не нужно, опишите что по вашему мнению тут нужно/можно протестировать, и почему это нужно сделать именно так, как вы предлагаете.


## Что нужно проверить:

* доступность адреса '/new_post/' при запросе, проверить 
response.status_code (200, 404, 301, 302, 500). Достаточно знать статус чтобы быть уверенным как страница отвечает на запрос.
* содержимое контекста страницы - передана ли сама форма (assert 'form' in   response.context). В response.context сохраняется все содержимое страницы, к этой переменной можно обращаться чтобы узнать поля, их характеристики и тд.

#### Получим список полей формы response.context['form'].fields и проверим их:
- количество через len(response.context['form'].fields), 
- название через ('field_name' in response.context['form'].fields),
- тип данных через type(response.context['form'].fields['field_name']), 
- обязательность - через признак required у поля.

#### Дальше нужно протестировать возможные позитивные и негативные сценарии создания поста. 
1. создание поста в тестовом режиме, заполнены только обязательные поля. 
- сохранение поста, проверка через запрос в базу данных, критерий поиска - по вводимым через форму данным и автору поста.
  post = Post.objects.get(.....)
- переадресацию на главную страницу после создания нового поста (assert response.status_code in (301, 302)).
- url на который идет переадресация (assert response.url == '/').

2. создание поста в тестовом режиме, заполнены все поля. 
- сохранение поста, проверка через запрос в базу данных, критерий поиска - по вводимым через форму данным и автору поста.
- переадресацию на главную страницу после создания нового поста, response.status_code должен быть 301, 302.
- url на который идет переадресация.

3. создание поста в тестовом режиме, не заполнены обязательные поля. 
- вывод ошибок при неверном заполнении формы.
- проверить что пост не сохранился, через подсчет количества объектов Post до и после создания нового поста.
  before = Post.objects.all().count() after=Post.objects.all().count()
  assert before==after

4. создание поста в тестовом режиме, заполнены поля неверными данными (формат ит.д.). 
- вывод ошибок при неверном заполнении формы.
- проверить что пост не сохранился, через подсчет количества объектов Post до и после создания нового поста.
  before = Post.objects.all().count() after=Post.objects.all().count()
  assert before==after
